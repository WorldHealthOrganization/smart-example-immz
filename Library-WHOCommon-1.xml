<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="696">
         <a:s>library WHOCommon</a:s>
      </a:s>
   </annotation>
   <identifier id="WHOCommon" system="http://smart.who.int/immunizations-measles"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <codeSystems>
      <def localId="3" locator="7:1-7:101" name="ConditionClinicalStatusCodes" id="http://terminology.hl7.org/CodeSystem/condition-clinical" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>codesystem &quot;ConditionClinicalStatusCodes&quot;: 'http://terminology.hl7.org/CodeSystem/condition-clinical'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <codes>
      <def localId="5" locator="10:1-10:59" name="active" id="active" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>// Condition Clinical Status Codes - Consider value sets for these
code &quot;active&quot;: 'active' from </a:s>
               <a:s r="4">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="4" locator="10:30-10:59" name="ConditionClinicalStatusCodes"/>
      </def>
      <def localId="7" locator="11:1-11:67" name="recurrence" id="recurrence" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>code &quot;recurrence&quot;: 'recurrence' from </a:s>
               <a:s r="6">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="6" locator="11:38-11:67" name="ConditionClinicalStatusCodes"/>
      </def>
      <def localId="9" locator="12:1-12:61" name="relapse" id="relapse" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="9">
               <a:s>code &quot;relapse&quot;: 'relapse' from </a:s>
               <a:s r="8">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="8" locator="12:32-12:61" name="ConditionClinicalStatusCodes"/>
      </def>
      <def localId="11" locator="13:1-13:63" name="inactive" id="inactive" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="11">
               <a:s>code &quot;inactive&quot;: 'inactive' from </a:s>
               <a:s r="10">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="10" locator="13:34-13:63" name="ConditionClinicalStatusCodes"/>
      </def>
      <def localId="13" locator="14:1-14:65" name="remission" id="remission" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>code &quot;remission&quot;: 'remission' from </a:s>
               <a:s r="12">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="12" locator="14:36-14:65" name="ConditionClinicalStatusCodes"/>
      </def>
      <def localId="15" locator="15:1-15:63" name="resolved" id="resolved" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="15">
               <a:s>code &quot;resolved&quot;: 'resolved' from </a:s>
               <a:s r="14">
                  <a:s>&quot;ConditionClinicalStatusCodes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="14" locator="15:34-15:63" name="ConditionClinicalStatusCodes"/>
      </def>
   </codes>
   <contexts>
      <def locator="17:1-17:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="17:1-17:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="17:1-17:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="26" locator="19:1-20:57" name="official" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="26">
               <a:s>define fluent function official(identifiers List&lt;Identifier>):
  </a:s>
               <a:s r="25">
                  <a:s r="25">
                     <a:s>singleton from </a:s>
                     <a:s r="24">
                        <a:s>(</a:s>
                        <a:s r="24">
                           <a:s>
                              <a:s r="19">
                                 <a:s r="18">
                                    <a:s>
                                       <a:s>identifiers</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> I</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="23">
                              <a:s>where </a:s>
                              <a:s r="23">
                                 <a:s r="21">
                                    <a:s r="20">
                                       <a:s>I</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="21">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="22">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="25" locator="20:3-20:57" xsi:type="SingletonFrom">
            <operand localId="24" locator="20:18-20:57" xsi:type="Query">
               <source localId="19" locator="20:19-20:31" alias="I">
                  <expression localId="18" locator="20:19-20:29" name="identifiers" xsi:type="OperandRef"/>
               </source>
               <where localId="23" locator="20:33-20:56" xsi:type="Equal">
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:IdentifierUse" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="21" locator="20:39-20:43" path="use" scope="I" xsi:type="Property"/>
                  </operand>
                  <operand localId="22" locator="20:47-20:56" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="identifiers">
            <operandTypeSpecifier localId="17" locator="19:45-19:60" xsi:type="ListTypeSpecifier">
               <elementType localId="16" locator="19:50-19:59" name="fhir:Identifier" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="37" locator="22:1-23:55" name="official" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="37">
               <a:s>define fluent function official(addresses List&lt;Address>):
  </a:s>
               <a:s r="36">
                  <a:s r="36">
                     <a:s>singleton from </a:s>
                     <a:s r="35">
                        <a:s>(</a:s>
                        <a:s r="35">
                           <a:s>
                              <a:s r="30">
                                 <a:s r="29">
                                    <a:s>
                                       <a:s>addresses</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> A</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="34">
                              <a:s>where </a:s>
                              <a:s r="34">
                                 <a:s r="32">
                                    <a:s r="31">
                                       <a:s>A</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="32">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="33">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="36" locator="23:3-23:55" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Address" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="35" locator="23:18-23:55" xsi:type="Query">
               <source localId="30" locator="23:19-23:29" alias="A">
                  <expression localId="29" locator="23:19-23:27" name="addresses" xsi:type="OperandRef"/>
               </source>
               <where localId="34" locator="23:31-23:54" xsi:type="Equal">
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:AddressUse" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="32" locator="23:37-23:41" path="use" scope="A" xsi:type="Property"/>
                  </operand>
                  <operand localId="33" locator="23:45-23:54" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="addresses">
            <operandTypeSpecifier localId="28" locator="22:43-22:55" xsi:type="ListTypeSpecifier">
               <elementType localId="27" locator="22:48-22:54" name="fhir:Address" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="48" locator="25:1-26:51" name="official" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="48">
               <a:s>define fluent function official(names List&lt;HumanName>):
  </a:s>
               <a:s r="47">
                  <a:s r="47">
                     <a:s>singleton from </a:s>
                     <a:s r="46">
                        <a:s>(</a:s>
                        <a:s r="46">
                           <a:s>
                              <a:s r="41">
                                 <a:s r="40">
                                    <a:s>
                                       <a:s>names</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> N</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="45">
                              <a:s>where </a:s>
                              <a:s r="45">
                                 <a:s r="43">
                                    <a:s r="42">
                                       <a:s>N</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="43">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="44">
                                    <a:s>'official'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="47" locator="26:3-26:51" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="46" locator="26:18-26:51" xsi:type="Query">
               <source localId="41" locator="26:19-26:25" alias="N">
                  <expression localId="40" locator="26:19-26:23" name="names" xsi:type="OperandRef"/>
               </source>
               <where localId="45" locator="26:27-26:50" xsi:type="Equal">
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:NameUse" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="43" locator="26:33-26:37" path="use" scope="N" xsi:type="Property"/>
                  </operand>
                  <operand localId="44" locator="26:41-26:50" valueType="t:String" value="official" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="names">
            <operandTypeSpecifier localId="39" locator="25:39-25:53" xsi:type="ListTypeSpecifier">
               <elementType localId="38" locator="25:44-25:52" name="fhir:HumanName" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="59" locator="28:1-29:57" name="mobile" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="59">
               <a:s>define fluent function mobile(contactPoints List&lt;ContactPoint>):
  </a:s>
               <a:s r="58">
                  <a:s r="58">
                     <a:s>singleton from </a:s>
                     <a:s r="57">
                        <a:s>(</a:s>
                        <a:s r="57">
                           <a:s>
                              <a:s r="52">
                                 <a:s r="51">
                                    <a:s>
                                       <a:s>contactPoints</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> P</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="56">
                              <a:s>where </a:s>
                              <a:s r="56">
                                 <a:s r="54">
                                    <a:s r="53">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="54">
                                       <a:s>use</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="55">
                                    <a:s>'mobile'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="58" locator="29:3-29:57" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ContactPoint" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="57" locator="29:18-29:57" xsi:type="Query">
               <source localId="52" locator="29:19-29:33" alias="P">
                  <expression localId="51" locator="29:19-29:31" name="contactPoints" xsi:type="OperandRef"/>
               </source>
               <where localId="56" locator="29:35-29:56" xsi:type="Equal">
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:ContactPointUse" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="54" locator="29:41-29:45" path="use" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="55" locator="29:49-29:56" valueType="t:String" value="mobile" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
         <operand name="contactPoints">
            <operandTypeSpecifier localId="50" locator="28:45-28:62" xsi:type="ListTypeSpecifier">
               <elementType localId="49" locator="28:50-28:61" name="fhir:ContactPoint" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="64" locator="31:1-32:26" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="64">
               <a:s>define fluent function only(allergies List&lt;AllergyIntolerance>):
  </a:s>
               <a:s r="63">
                  <a:s r="63">
                     <a:s>singleton from </a:s>
                     <a:s r="62">
                        <a:s>allergies</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="63" locator="32:3-32:26" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:AllergyIntolerance" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="62" locator="32:18-32:26" name="allergies" xsi:type="OperandRef"/>
         </expression>
         <operand name="allergies">
            <operandTypeSpecifier localId="61" locator="31:39-31:62" xsi:type="ListTypeSpecifier">
               <elementType localId="60" locator="31:44-31:61" name="fhir:AllergyIntolerance" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="69" locator="34:1-35:29" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="69">
               <a:s>define fluent function only(appointments List&lt;Appointment>):
  </a:s>
               <a:s r="68">
                  <a:s r="68">
                     <a:s>singleton from </a:s>
                     <a:s r="67">
                        <a:s>appointments</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="68" locator="35:3-35:29" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Appointment" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="67" locator="35:18-35:29" name="appointments" xsi:type="OperandRef"/>
         </expression>
         <operand name="appointments">
            <operandTypeSpecifier localId="66" locator="34:42-34:58" xsi:type="ListTypeSpecifier">
               <elementType localId="65" locator="34:47-34:57" name="fhir:Appointment" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="74" locator="37:1-38:26" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="74">
               <a:s>define fluent function only(careplans List&lt;CarePlan>):
  </a:s>
               <a:s r="73">
                  <a:s r="73">
                     <a:s>singleton from </a:s>
                     <a:s r="72">
                        <a:s>careplans</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="73" locator="38:3-38:26" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:CarePlan" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="72" locator="38:18-38:26" name="careplans" xsi:type="OperandRef"/>
         </expression>
         <operand name="careplans">
            <operandTypeSpecifier localId="71" locator="37:39-37:52" xsi:type="ListTypeSpecifier">
               <elementType localId="70" locator="37:44-37:51" name="fhir:CarePlan" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="79" locator="40:1-41:27" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="79">
               <a:s>define fluent function only(conditions List&lt;Condition>):
  </a:s>
               <a:s r="78">
                  <a:s r="78">
                     <a:s>singleton from </a:s>
                     <a:s r="77">
                        <a:s>conditions</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="78" locator="41:3-41:27" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="77" locator="41:18-41:27" name="conditions" xsi:type="OperandRef"/>
         </expression>
         <operand name="conditions">
            <operandTypeSpecifier localId="76" locator="40:40-40:54" xsi:type="ListTypeSpecifier">
               <elementType localId="75" locator="40:45-40:53" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="84" locator="43:1-44:27" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="84">
               <a:s>define fluent function only(encounters List&lt;Encounter>):
  </a:s>
               <a:s r="83">
                  <a:s r="83">
                     <a:s>singleton from </a:s>
                     <a:s r="82">
                        <a:s>encounters</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="83" locator="44:3-44:27" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="82" locator="44:18-44:27" name="encounters" xsi:type="OperandRef"/>
         </expression>
         <operand name="encounters">
            <operandTypeSpecifier localId="81" locator="43:40-43:54" xsi:type="ListTypeSpecifier">
               <elementType localId="80" locator="43:45-43:53" name="fhir:Encounter" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="89" locator="46:1-47:30" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="89">
               <a:s>define fluent function only(immunizations List&lt;Immunization>):
  </a:s>
               <a:s r="88">
                  <a:s r="88">
                     <a:s>singleton from </a:s>
                     <a:s r="87">
                        <a:s>immunizations</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="88" locator="47:3-47:30" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="87" locator="47:18-47:30" name="immunizations" xsi:type="OperandRef"/>
         </expression>
         <operand name="immunizations">
            <operandTypeSpecifier localId="86" locator="46:43-46:60" xsi:type="ListTypeSpecifier">
               <elementType localId="85" locator="46:48-46:59" name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="94" locator="49:1-50:26" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="94">
               <a:s>define fluent function only(locations List&lt;Location>):
  </a:s>
               <a:s r="93">
                  <a:s r="93">
                     <a:s>singleton from </a:s>
                     <a:s r="92">
                        <a:s>locations</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="93" locator="50:3-50:26" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Location" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="92" locator="50:18-50:26" name="locations" xsi:type="OperandRef"/>
         </expression>
         <operand name="locations">
            <operandTypeSpecifier localId="91" locator="49:39-49:52" xsi:type="ListTypeSpecifier">
               <elementType localId="90" locator="49:44-49:51" name="fhir:Location" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="99" locator="52:1-53:35" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="99">
               <a:s>define fluent function only(medicationrequests List&lt;MedicationRequest>):
  </a:s>
               <a:s r="98">
                  <a:s r="98">
                     <a:s>singleton from </a:s>
                     <a:s r="97">
                        <a:s>medicationrequests</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="98" locator="53:3-53:35" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="97" locator="53:18-53:35" name="medicationrequests" xsi:type="OperandRef"/>
         </expression>
         <operand name="medicationrequests">
            <operandTypeSpecifier localId="96" locator="52:48-52:70" xsi:type="ListTypeSpecifier">
               <elementType localId="95" locator="52:53-52:69" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="104" locator="55:1-56:29" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="104">
               <a:s>define fluent function only(observations List&lt;Observation>):
  </a:s>
               <a:s r="103">
                  <a:s r="103">
                     <a:s>singleton from </a:s>
                     <a:s r="102">
                        <a:s>observations</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="103" locator="56:3-56:29" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="102" locator="56:18-56:29" name="observations" xsi:type="OperandRef"/>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="101" locator="55:42-55:58" xsi:type="ListTypeSpecifier">
               <elementType localId="100" locator="55:47-55:57" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="109" locator="58:1-59:27" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="109">
               <a:s>define fluent function only(procedures List&lt;Procedure>):
  </a:s>
               <a:s r="108">
                  <a:s r="108">
                     <a:s>singleton from </a:s>
                     <a:s r="107">
                        <a:s>procedures</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="108" locator="59:3-59:27" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="107" locator="59:18-59:27" name="procedures" xsi:type="OperandRef"/>
         </expression>
         <operand name="procedures">
            <operandTypeSpecifier localId="106" locator="58:40-58:54" xsi:type="ListTypeSpecifier">
               <elementType localId="105" locator="58:45-58:53" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="114" locator="61:1-62:32" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="114">
               <a:s>define fluent function only(serviceRequests List&lt;ServiceRequest>):
  </a:s>
               <a:s r="113">
                  <a:s r="113">
                     <a:s>singleton from </a:s>
                     <a:s r="112">
                        <a:s>serviceRequests</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="113" locator="62:3-62:32" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="112" locator="62:18-62:32" name="serviceRequests" xsi:type="OperandRef"/>
         </expression>
         <operand name="serviceRequests">
            <operandTypeSpecifier localId="111" locator="61:45-61:64" xsi:type="ListTypeSpecifier">
               <elementType localId="110" locator="61:50-61:63" name="fhir:ServiceRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="119" locator="64:1-65:24" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="119">
               <a:s>define fluent function only(dosages List&lt;Dosage>):
  </a:s>
               <a:s r="118">
                  <a:s r="118">
                     <a:s>singleton from </a:s>
                     <a:s r="117">
                        <a:s>dosages</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="118" locator="65:3-65:24" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Dosage" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="117" locator="65:18-65:24" name="dosages" xsi:type="OperandRef"/>
         </expression>
         <operand name="dosages">
            <operandTypeSpecifier localId="116" locator="64:37-64:48" xsi:type="ListTypeSpecifier">
               <elementType localId="115" locator="64:42-64:47" name="fhir:Dosage" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="124" locator="67:1-68:22" name="only" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="124">
               <a:s>define fluent function only(doses List&lt;FHIR.Dosage.DoseAndRate>):
  </a:s>
               <a:s r="123">
                  <a:s r="123">
                     <a:s>singleton from </a:s>
                     <a:s r="122">
                        <a:s>doses</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="123" locator="68:3-68:22" xsi:type="SingletonFrom">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <operand localId="122" locator="68:18-68:22" name="doses" xsi:type="OperandRef"/>
         </expression>
         <operand name="doses">
            <operandTypeSpecifier localId="121" locator="67:35-67:63" xsi:type="ListTypeSpecifier">
               <elementType localId="120" locator="67:40-67:62" name="fhir:Dosage.DoseAndRate" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="134" locator="70:1-74:3" name="earliest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="134">
               <a:s>define fluent function earliest(observations List&lt;Observation>):
  </a:s>
               <a:s r="133">
                  <a:s r="133">
                     <a:s>First(
    </a:s>
                     <a:s r="132">
                        <a:s>
                           <a:s r="128">
                              <a:s r="127">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="131">
                           <a:s>sort by </a:s>
                           <a:s r="130">
                              <a:s r="129">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="133" locator="71:3-74:3" xsi:type="First">
            <source localId="132" locator="72:5-73:20" xsi:type="Query">
               <source localId="128" locator="72:5-72:18" alias="O">
                  <expression localId="127" locator="72:5-72:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="131" locator="73:7-73:20">
                  <by localId="130" locator="73:15-73:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="126" locator="70:46-70:62" xsi:type="ListTypeSpecifier">
               <elementType localId="125" locator="70:51-70:61" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="144" locator="76:1-80:3" name="latest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="144">
               <a:s>define fluent function latest(observations List&lt;Observation>):
  </a:s>
               <a:s r="143">
                  <a:s r="143">
                     <a:s>Last(
    </a:s>
                     <a:s r="142">
                        <a:s>
                           <a:s r="138">
                              <a:s r="137">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="141">
                           <a:s>sort by </a:s>
                           <a:s r="140">
                              <a:s r="139">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="143" locator="77:3-80:3" xsi:type="Last">
            <source localId="142" locator="78:5-79:20" xsi:type="Query">
               <source localId="138" locator="78:5-78:18" alias="O">
                  <expression localId="137" locator="78:5-78:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="141" locator="79:7-79:20">
                  <by localId="140" locator="79:15-79:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="136" locator="76:44-76:60" xsi:type="ListTypeSpecifier">
               <elementType localId="135" locator="76:49-76:59" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="154" locator="82:1-86:3" name="mostRecent" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="154">
               <a:s>define fluent function mostRecent(observations List&lt;Observation>):
  </a:s>
               <a:s r="153">
                  <a:s r="153">
                     <a:s>Last(
    </a:s>
                     <a:s r="152">
                        <a:s>
                           <a:s r="148">
                              <a:s r="147">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="151">
                           <a:s>sort by </a:s>
                           <a:s r="150">
                              <a:s r="149">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="153" locator="83:3-86:3" xsi:type="Last">
            <source localId="152" locator="84:5-85:20" xsi:type="Query">
               <source localId="148" locator="84:5-84:18" alias="O">
                  <expression localId="147" locator="84:5-84:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="151" locator="85:7-85:20">
                  <by localId="150" locator="85:15-85:20" direction="asc" path="issued" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="146" locator="82:48-82:64" xsi:type="ListTypeSpecifier">
               <elementType localId="145" locator="82:53-82:63" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="300" locator="88:1-92:3" name="mostRecent" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="300">
               <a:s>define fluent function mostRecent(procedures List&lt;Procedure>):
  </a:s>
               <a:s r="299">
                  <a:s r="299">
                     <a:s>Last(
    </a:s>
                     <a:s r="298">
                        <a:s>
                           <a:s r="158">
                              <a:s r="157">
                                 <a:s>
                                    <a:s>procedures</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> P</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="297">
                           <a:s>sort by </a:s>
                           <a:s r="296">
                              <a:s r="295">
                                 <a:s>start of </a:s>
                                 <a:s r="294">
                                    <a:s r="159">
                                       <a:s>performed</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="294">
                                       <a:s>toInterval()</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="299" locator="89:3-92:3" xsi:type="Last">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="298" locator="90:5-91:45" xsi:type="Query">
               <source localId="158" locator="90:5-90:16" alias="P">
                  <expression localId="157" locator="90:5-90:14" name="procedures" xsi:type="OperandRef"/>
               </source>
               <sort localId="297" locator="91:7-91:45">
                  <by localId="296" locator="91:15-91:45" direction="asc" xsi:type="ByExpression">
                     <expression localId="295" locator="91:15-91:45" xsi:type="Start">
                        <operand localId="294" locator="91:24-91:45" name="toInterval" xsi:type="FunctionRef">
                           <operand localId="159" locator="91:24-91:32" name="performed" xsi:type="IdentifierRef"/>
                        </operand>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="procedures">
            <operandTypeSpecifier localId="156" locator="88:46-88:60" xsi:type="ListTypeSpecifier">
               <elementType localId="155" locator="88:51-88:59" name="fhir:Procedure" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="487" locator="155:1-175:5" name="toInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Normalizes a value that is a choice of timing-valued types to an equivalent interval"/>
            <a:t name="comment" value="Normalizes a choice type of FHIR.dateTime, FHIR.Period, FHIR.Timing, FHIR.instance, FHIR.string, FHIR.Age, or FHIR.Range types&#xa;to an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible&#xa;representations for timing-valued elements in FHIR, allowing this function to be used across any resource.&#xa;&#xa;The input can be provided as a dateTime, Period, Timing, instant, string, Age, or Range.&#xa;The intent of this function is to provide a clear and concise mechanism to treat single&#xa;elements that have multiple possible representations as intervals so that logic doesn't have to account&#xa;for the variability. More complex calculations (such as medication request period or dispense period&#xa;calculation) need specific guidance and consideration. That guidance may make use of this function, but&#xa;the focus of this function is on single element calculations where the semantics are unambiguous.&#xa;If the input is a dateTime, the result a DateTime Interval beginning and ending on that dateTime.&#xa;If the input is a Period, the result is a DateTime Interval.&#xa;If the input is a Timing, an error is raised indicating a single interval cannot be computed from a Timing.&#xa;If the input is an instant, the result is a DateTime Interval beginning and ending on that instant.&#xa;If the input is a string, an error is raised indicating a single interval cannot be computed from a string.&#xa;If the input is an Age, the result is a DateTime Interval beginning when the patient was the given Age,&#xa;and ending immediately prior to when the patient was the given Age plus one year.&#xa;If the input is a Range, the result is a DateTime Interval beginning when the patient was the Age given&#xa;by the low end of the Range, and ending immediately prior to when the patient was the Age given by the&#xa;high end of the Range plus one year.&#xa;&#xa;NOTE: Due to the&#xa;complexity of determining a single interval from a Timing or String type, this function will throw a run-time exception if it is used&#xa;with a Timing or String."/>
            <a:s r="487">
               <a:s>/*
From FHIRCommon 4.1.0:
*/

/*
@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval
@comment: Normalizes a choice type of FHIR.dateTime, FHIR.Period, FHIR.Timing, FHIR.instance, FHIR.string, FHIR.Age, or FHIR.Range types
to an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible
representations for timing-valued elements in FHIR, allowing this function to be used across any resource.

The input can be provided as a dateTime, Period, Timing, instant, string, Age, or Range.
The intent of this function is to provide a clear and concise mechanism to treat single
elements that have multiple possible representations as intervals so that logic doesn't have to account
for the variability. More complex calculations (such as medication request period or dispense period
calculation) need specific guidance and consideration. That guidance may make use of this function, but
the focus of this function is on single element calculations where the semantics are unambiguous.
If the input is a dateTime, the result a DateTime Interval beginning and ending on that dateTime.
If the input is a Period, the result is a DateTime Interval.
If the input is a Timing, an error is raised indicating a single interval cannot be computed from a Timing.
If the input is an instant, the result is a DateTime Interval beginning and ending on that instant.
If the input is a string, an error is raised indicating a single interval cannot be computed from a string.
If the input is an Age, the result is a DateTime Interval beginning when the patient was the given Age,
and ending immediately prior to when the patient was the given Age plus one year.
If the input is a Range, the result is a DateTime Interval beginning when the patient was the Age given
by the low end of the Range, and ending immediately prior to when the patient was the Age given by the
high end of the Range plus one year.

NOTE: Due to the
complexity of determining a single interval from a Timing or String type, this function will throw a run-time exception if it is used
with a Timing or String.
*/
define fluent function toInterval(choice Choice&lt;FHIR.dateTime, FHIR.Period, FHIR.Timing, FHIR.instant, FHIR.string, FHIR.Age, FHIR.Range>):
  </a:s>
               <a:s r="486">
                  <a:s r="486">
                     <a:s>case
    </a:s>
                     <a:s r="375">
                        <a:s>when </a:s>
                        <a:s r="363">
                           <a:s r="361">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="362">
                              <a:s>FHIR.dateTime</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="374">
                           <a:s>Interval[</a:s>
                           <a:s r="368">
                              <a:s r="364">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="368">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="367">
                                    <a:s r="365">
                                       <a:s>choice</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="366">
                                       <a:s>FHIR.dateTime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="373">
                              <a:s r="369">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="373">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="372">
                                    <a:s r="370">
                                       <a:s>choice</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="371">
                                       <a:s>FHIR.dateTime</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>]</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="384">
                        <a:s>when </a:s>
                        <a:s r="378">
                           <a:s r="376">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="377">
                              <a:s>FHIR.Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="383">
                           <a:s r="379">
                              <a:s>FHIRHelpers</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="383">
                              <a:s>ToInterval(</a:s>
                              <a:s r="382">
                                 <a:s r="380">
                                    <a:s>choice</a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="381">
                                    <a:s>FHIR.Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="399">
                        <a:s>when </a:s>
                        <a:s r="387">
                           <a:s r="385">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="386">
                              <a:s>FHIR.instant</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="398">
                           <a:s>Interval[</a:s>
                           <a:s r="392">
                              <a:s r="388">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="392">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="391">
                                    <a:s r="389">
                                       <a:s>choice</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="390">
                                       <a:s>FHIR.instant</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="397">
                              <a:s r="393">
                                 <a:s>FHIRHelpers</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="397">
                                 <a:s>ToDateTime(</a:s>
                                 <a:s r="396">
                                    <a:s r="394">
                                       <a:s>choice</a:s>
                                    </a:s>
                                    <a:s> as </a:s>
                                    <a:s r="395">
                                       <a:s>FHIR.instant</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>]</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="426">
                        <a:s>when </a:s>
                        <a:s r="402">
                           <a:s r="400">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="401">
                              <a:s>FHIR.Age</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="425">
                           <a:s>Interval[</a:s>
                           <a:s r="412">
                              <a:s r="406">
                                 <a:s r="403">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="406">
                                    <a:s>ToDate(</a:s>
                                    <a:s r="405">
                                       <a:s r="404">
                                          <a:s>Patient</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="405">
                                          <a:s>birthDate</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="411">
                                 <a:s r="407">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="411">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="410">
                                       <a:s r="408">
                                          <a:s>choice</a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="409">
                                          <a:s>FHIR.Age</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
        </a:s>
                           <a:s r="424">
                              <a:s r="422">
                                 <a:s r="416">
                                    <a:s r="413">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="416">
                                       <a:s>ToDate(</a:s>
                                       <a:s r="415">
                                          <a:s r="414">
                                             <a:s>Patient</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="415">
                                             <a:s>birthDate</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="421">
                                    <a:s r="417">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="421">
                                       <a:s>ToQuantity(</a:s>
                                       <a:s r="420">
                                          <a:s r="418">
                                             <a:s>choice</a:s>
                                          </a:s>
                                          <a:s> as </a:s>
                                          <a:s r="419">
                                             <a:s>FHIR.Age</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="423">
                                 <a:s>1 year</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="455">
                        <a:s>when </a:s>
                        <a:s r="429">
                           <a:s r="427">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="428">
                              <a:s>FHIR.Range</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="454">
                           <a:s>Interval[</a:s>
                           <a:s r="440">
                              <a:s r="433">
                                 <a:s r="430">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="433">
                                    <a:s>ToDate(</a:s>
                                    <a:s r="432">
                                       <a:s r="431">
                                          <a:s>Patient</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="432">
                                          <a:s>birthDate</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="439">
                                 <a:s r="434">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="439">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="438">
                                       <a:s r="437">
                                          <a:s>(</a:s>
                                          <a:s r="437">
                                             <a:s r="435">
                                                <a:s>choice</a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="436">
                                                <a:s>FHIR.Range</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="438">
                                          <a:s>low</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>,
        </a:s>
                           <a:s r="453">
                              <a:s r="451">
                                 <a:s r="444">
                                    <a:s r="441">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="444">
                                       <a:s>ToDate(</a:s>
                                       <a:s r="443">
                                          <a:s r="442">
                                             <a:s>Patient</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="443">
                                             <a:s>birthDate</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="450">
                                    <a:s r="445">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="450">
                                       <a:s>ToQuantity(</a:s>
                                       <a:s r="449">
                                          <a:s r="448">
                                             <a:s>(</a:s>
                                             <a:s r="448">
                                                <a:s r="446">
                                                   <a:s>choice</a:s>
                                                </a:s>
                                                <a:s> as </a:s>
                                                <a:s r="447">
                                                   <a:s>FHIR.Range</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="449">
                                             <a:s>high</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> + </a:s>
                              <a:s r="452">
                                 <a:s>1 year</a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="468">
                        <a:s>when </a:s>
                        <a:s r="458">
                           <a:s r="456">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="457">
                              <a:s>FHIR.Timing</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="467">
                           <a:s>Message(</a:s>
                           <a:s r="462">
                              <a:s r="459">null as </a:s>
                              <a:s r="461">
                                 <a:s>Interval&lt;</a:s>
                                 <a:s r="460">
                                    <a:s>DateTime</a:s>
                                 </a:s>
                                 <a:s>></a:s>
                              </a:s>
                           </a:s>
                           <a:s r="463">, true, </a:s>
                           <a:s r="464">
                              <a:s>'NOT_IMPLEMENTED'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="465">
                              <a:s>'Error'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="466">
                              <a:s>'Calculation of an interval from a Timing value is not supported'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="481">
                        <a:s>when </a:s>
                        <a:s r="471">
                           <a:s r="469">
                              <a:s>choice</a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="470">
                              <a:s>FHIR.string</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
      </a:s>
                        <a:s r="480">
                           <a:s>Message(</a:s>
                           <a:s r="475">
                              <a:s r="472">null as </a:s>
                              <a:s r="474">
                                 <a:s>Interval&lt;</a:s>
                                 <a:s r="473">
                                    <a:s>DateTime</a:s>
                                 </a:s>
                                 <a:s>></a:s>
                              </a:s>
                           </a:s>
                           <a:s r="476">, true, </a:s>
                           <a:s r="477">
                              <a:s>'NOT_IMPLEMENTED'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="478">
                              <a:s>'Error'</a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="479">
                              <a:s>'Calculation of an interval from a String value is not supported'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    else
      </a:s>
                     <a:s r="485">
                        <a:s r="482">null as </a:s>
                        <a:s r="484">
                           <a:s>Interval&lt;</a:s>
                           <a:s r="483">
                              <a:s>DateTime</a:s>
                           </a:s>
                           <a:s>></a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="486" locator="156:3-175:5" xsi:type="Case">
            <caseItem localId="375" locator="157:5-158:112">
               <when localId="363" locator="157:10-157:32" xsi:type="Is">
                  <operand localId="361" locator="157:10-157:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="362" locator="157:20-157:32" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="374" locator="158:7-158:112" lowClosed="true" highClosed="true" xsi:type="Interval">
                  <low localId="368" locator="158:16-158:62" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="367" locator="158:39-158:61" strict="false" xsi:type="As">
                        <operand localId="365" locator="158:39-158:44" name="choice" xsi:type="OperandRef"/>
                        <asTypeSpecifier localId="366" locator="158:49-158:61" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </low>
                  <high localId="373" locator="158:65-158:111" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="372" locator="158:88-158:110" strict="false" xsi:type="As">
                        <operand localId="370" locator="158:88-158:93" name="choice" xsi:type="OperandRef"/>
                        <asTypeSpecifier localId="371" locator="158:98-158:110" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </high>
               </then>
            </caseItem>
            <caseItem localId="384" locator="159:5-160:51">
               <when localId="378" locator="159:10-159:30" xsi:type="Is">
                  <operand localId="376" locator="159:10-159:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="377" locator="159:20-159:30" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="383" locator="160:7-160:51" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="382" locator="160:30-160:50" strict="false" xsi:type="As">
                     <operand localId="380" locator="160:30-160:35" name="choice" xsi:type="OperandRef"/>
                     <asTypeSpecifier localId="381" locator="160:40-160:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="399" locator="161:5-162:110">
               <when localId="387" locator="161:10-161:31" xsi:type="Is">
                  <operand localId="385" locator="161:10-161:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="386" locator="161:20-161:31" name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="398" locator="162:7-162:110" lowClosed="true" highClosed="true" xsi:type="Interval">
                  <low localId="392" locator="162:16-162:61" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="391" locator="162:39-162:60" strict="false" xsi:type="As">
                        <operand localId="389" locator="162:39-162:44" name="choice" xsi:type="OperandRef"/>
                        <asTypeSpecifier localId="390" locator="162:49-162:60" name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </low>
                  <high localId="397" locator="162:64-162:109" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="396" locator="162:87-162:108" strict="false" xsi:type="As">
                        <operand localId="394" locator="162:87-162:92" name="choice" xsi:type="OperandRef"/>
                        <asTypeSpecifier localId="395" locator="162:97-162:108" name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                     </operand>
                  </high>
               </then>
            </caseItem>
            <caseItem localId="426" locator="163:5-165:100">
               <when localId="402" locator="163:10-163:27" xsi:type="Is">
                  <operand localId="400" locator="163:10-163:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="401" locator="163:20-163:27" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand path="low" xsi:type="Property">
                        <source localId="425" locator="164:7-165:100" lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low localId="412" locator="164:16-164:97" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="406" locator="164:16-164:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="405" locator="164:35-164:51" path="birthDate" xsi:type="Property">
                                    <source localId="404" locator="164:35-164:41" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="411" locator="164:56-164:97" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="410" locator="164:79-164:96" strict="false" xsi:type="As">
                                    <operand localId="408" locator="164:79-164:84" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="409" locator="164:89-164:96" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                           </low>
                           <high localId="424" locator="165:9-165:99" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="422" locator="165:9-165:90" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="416" locator="165:9-165:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="415" locator="165:28-165:44" path="birthDate" xsi:type="Property">
                                       <source localId="414" locator="165:28-165:34" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="421" locator="165:49-165:90" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="420" locator="165:72-165:89" strict="false" xsi:type="As">
                                       <operand localId="418" locator="165:72-165:77" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="419" locator="165:82-165:89" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="423" locator="165:94-165:99" value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source localId="425" locator="164:7-165:100" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="412" locator="164:16-164:97" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="406" locator="164:16-164:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="405" locator="164:35-164:51" path="birthDate" xsi:type="Property">
                                 <source localId="404" locator="164:35-164:41" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="411" locator="164:56-164:97" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="410" locator="164:79-164:96" strict="false" xsi:type="As">
                                 <operand localId="408" locator="164:79-164:84" name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier localId="409" locator="164:89-164:96" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                        </low>
                        <high localId="424" locator="165:9-165:99" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="422" locator="165:9-165:90" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="416" locator="165:9-165:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="415" locator="165:28-165:44" path="birthDate" xsi:type="Property">
                                    <source localId="414" locator="165:28-165:34" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="421" locator="165:49-165:90" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="420" locator="165:72-165:89" strict="false" xsi:type="As">
                                    <operand localId="418" locator="165:72-165:77" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="419" locator="165:82-165:89" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="423" locator="165:94-165:99" value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand path="high" xsi:type="Property">
                        <source localId="425" locator="164:7-165:100" lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low localId="412" locator="164:16-164:97" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="406" locator="164:16-164:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="405" locator="164:35-164:51" path="birthDate" xsi:type="Property">
                                    <source localId="404" locator="164:35-164:41" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="411" locator="164:56-164:97" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="410" locator="164:79-164:96" strict="false" xsi:type="As">
                                    <operand localId="408" locator="164:79-164:84" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="409" locator="164:89-164:96" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                           </low>
                           <high localId="424" locator="165:9-165:99" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="422" locator="165:9-165:90" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="416" locator="165:9-165:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="415" locator="165:28-165:44" path="birthDate" xsi:type="Property">
                                       <source localId="414" locator="165:28-165:34" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="421" locator="165:49-165:90" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="420" locator="165:72-165:89" strict="false" xsi:type="As">
                                       <operand localId="418" locator="165:72-165:77" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="419" locator="165:82-165:89" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="423" locator="165:94-165:99" value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source localId="425" locator="164:7-165:100" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="412" locator="164:16-164:97" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="406" locator="164:16-164:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="405" locator="164:35-164:51" path="birthDate" xsi:type="Property">
                                 <source localId="404" locator="164:35-164:41" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="411" locator="164:56-164:97" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="410" locator="164:79-164:96" strict="false" xsi:type="As">
                                 <operand localId="408" locator="164:79-164:84" name="choice" xsi:type="OperandRef"/>
                                 <asTypeSpecifier localId="409" locator="164:89-164:96" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                              </operand>
                           </operand>
                        </low>
                        <high localId="424" locator="165:9-165:99" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="422" locator="165:9-165:90" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="416" locator="165:9-165:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="415" locator="165:28-165:44" path="birthDate" xsi:type="Property">
                                    <source localId="414" locator="165:28-165:34" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="421" locator="165:49-165:90" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="420" locator="165:72-165:89" strict="false" xsi:type="As">
                                    <operand localId="418" locator="165:72-165:77" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="419" locator="165:82-165:89" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="423" locator="165:94-165:99" value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <caseItem localId="455" locator="166:5-168:109">
               <when localId="429" locator="166:10-166:29" xsi:type="Is">
                  <operand localId="427" locator="166:10-166:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="428" locator="166:20-166:29" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand path="low" xsi:type="Property">
                        <source localId="454" locator="167:7-168:109" lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low localId="440" locator="167:16-167:105" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="433" locator="167:16-167:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="432" locator="167:35-167:51" path="birthDate" xsi:type="Property">
                                    <source localId="431" locator="167:35-167:41" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="439" locator="167:56-167:105" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="438" locator="167:79-167:104" path="low" xsi:type="Property">
                                    <source localId="437" locator="167:79-167:100" strict="false" xsi:type="As">
                                       <operand localId="435" locator="167:80-167:85" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="436" locator="167:90-167:99" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <high localId="453" locator="168:9-168:108" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="451" locator="168:9-168:99" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="444" locator="168:9-168:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="443" locator="168:28-168:44" path="birthDate" xsi:type="Property">
                                       <source localId="442" locator="168:28-168:34" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="450" locator="168:49-168:99" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="449" locator="168:72-168:98" path="high" xsi:type="Property">
                                       <source localId="448" locator="168:72-168:93" strict="false" xsi:type="As">
                                          <operand localId="446" locator="168:73-168:78" name="choice" xsi:type="OperandRef"/>
                                          <asTypeSpecifier localId="447" locator="168:83-168:92" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                       </source>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="452" locator="168:103-168:108" value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source localId="454" locator="167:7-168:109" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="440" locator="167:16-167:105" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="433" locator="167:16-167:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="432" locator="167:35-167:51" path="birthDate" xsi:type="Property">
                                 <source localId="431" locator="167:35-167:41" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="439" locator="167:56-167:105" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="438" locator="167:79-167:104" path="low" xsi:type="Property">
                                 <source localId="437" locator="167:79-167:100" strict="false" xsi:type="As">
                                    <operand localId="435" locator="167:80-167:85" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="436" locator="167:90-167:99" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <high localId="453" locator="168:9-168:108" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="451" locator="168:9-168:99" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="444" locator="168:9-168:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="443" locator="168:28-168:44" path="birthDate" xsi:type="Property">
                                    <source localId="442" locator="168:28-168:34" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="450" locator="168:49-168:99" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="449" locator="168:72-168:98" path="high" xsi:type="Property">
                                    <source localId="448" locator="168:72-168:93" strict="false" xsi:type="As">
                                       <operand localId="446" locator="168:73-168:78" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="447" locator="168:83-168:92" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                    </source>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="452" locator="168:103-168:108" value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                     <operand path="high" xsi:type="Property">
                        <source localId="454" locator="167:7-168:109" lowClosed="true" highClosed="false" xsi:type="Interval">
                           <low localId="440" locator="167:16-167:105" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="433" locator="167:16-167:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="432" locator="167:35-167:51" path="birthDate" xsi:type="Property">
                                    <source localId="431" locator="167:35-167:41" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="439" locator="167:56-167:105" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="438" locator="167:79-167:104" path="low" xsi:type="Property">
                                    <source localId="437" locator="167:79-167:100" strict="false" xsi:type="As">
                                       <operand localId="435" locator="167:80-167:85" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="436" locator="167:90-167:99" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                    </source>
                                 </operand>
                              </operand>
                           </low>
                           <high localId="453" locator="168:9-168:108" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="451" locator="168:9-168:99" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="444" locator="168:9-168:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="443" locator="168:28-168:44" path="birthDate" xsi:type="Property">
                                       <source localId="442" locator="168:28-168:34" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="450" locator="168:49-168:99" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="449" locator="168:72-168:98" path="high" xsi:type="Property">
                                       <source localId="448" locator="168:72-168:93" strict="false" xsi:type="As">
                                          <operand localId="446" locator="168:73-168:78" name="choice" xsi:type="OperandRef"/>
                                          <asTypeSpecifier localId="447" locator="168:83-168:92" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                       </source>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="452" locator="168:103-168:108" value="1" unit="year" xsi:type="Quantity"/>
                           </high>
                        </source>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source localId="454" locator="167:7-168:109" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="440" locator="167:16-167:105" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="433" locator="167:16-167:52" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="432" locator="167:35-167:51" path="birthDate" xsi:type="Property">
                                 <source localId="431" locator="167:35-167:41" name="Patient" xsi:type="ExpressionRef"/>
                              </operand>
                           </operand>
                           <operand localId="439" locator="167:56-167:105" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="438" locator="167:79-167:104" path="low" xsi:type="Property">
                                 <source localId="437" locator="167:79-167:100" strict="false" xsi:type="As">
                                    <operand localId="435" locator="167:80-167:85" name="choice" xsi:type="OperandRef"/>
                                    <asTypeSpecifier localId="436" locator="167:90-167:99" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                 </source>
                              </operand>
                           </operand>
                        </low>
                        <high localId="453" locator="168:9-168:108" xsi:type="Add">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="451" locator="168:9-168:99" xsi:type="Add">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="444" locator="168:9-168:45" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="443" locator="168:28-168:44" path="birthDate" xsi:type="Property">
                                    <source localId="442" locator="168:28-168:34" name="Patient" xsi:type="ExpressionRef"/>
                                 </operand>
                              </operand>
                              <operand localId="450" locator="168:49-168:99" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="449" locator="168:72-168:98" path="high" xsi:type="Property">
                                    <source localId="448" locator="168:72-168:93" strict="false" xsi:type="As">
                                       <operand localId="446" locator="168:73-168:78" name="choice" xsi:type="OperandRef"/>
                                       <asTypeSpecifier localId="447" locator="168:83-168:92" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                    </source>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="452" locator="168:103-168:108" value="1" unit="year" xsi:type="Quantity"/>
                        </high>
                     </source>
                  </highClosedExpression>
               </then>
            </caseItem>
            <caseItem localId="468" locator="169:5-170:142">
               <when localId="458" locator="169:10-169:30" xsi:type="Is">
                  <operand localId="456" locator="169:10-169:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="457" locator="169:20-169:30" name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="467" locator="170:7-170:142" xsi:type="Message">
                  <source localId="462" locator="170:15-170:40" strict="false" xsi:type="As">
                     <operand localId="459" locator="170:15-170:18" xsi:type="Null"/>
                     <asTypeSpecifier localId="461" locator="170:23-170:40" xsi:type="IntervalTypeSpecifier">
                        <pointType localId="460" locator="170:32-170:39" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </source>
                  <condition localId="463" locator="170:43-170:46" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="464" locator="170:49-170:65" valueType="t:String" value="NOT_IMPLEMENTED" xsi:type="Literal"/>
                  <severity localId="465" locator="170:68-170:74" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="466" locator="170:77-170:141" valueType="t:String" value="Calculation of an interval from a Timing value is not supported" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="481" locator="171:5-172:142">
               <when localId="471" locator="171:10-171:30" xsi:type="Is">
                  <operand localId="469" locator="171:10-171:15" name="choice" xsi:type="OperandRef"/>
                  <isTypeSpecifier localId="470" locator="171:20-171:30" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="480" locator="172:7-172:142" xsi:type="Message">
                  <source localId="475" locator="172:15-172:40" strict="false" xsi:type="As">
                     <operand localId="472" locator="172:15-172:18" xsi:type="Null"/>
                     <asTypeSpecifier localId="474" locator="172:23-172:40" xsi:type="IntervalTypeSpecifier">
                        <pointType localId="473" locator="172:32-172:39" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                     </asTypeSpecifier>
                  </source>
                  <condition localId="476" locator="172:43-172:46" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="477" locator="172:49-172:65" valueType="t:String" value="NOT_IMPLEMENTED" xsi:type="Literal"/>
                  <severity localId="478" locator="172:68-172:74" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="479" locator="172:77-172:141" valueType="t:String" value="Calculation of an interval from a String value is not supported" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else localId="485" locator="174:7-174:32" strict="false" xsi:type="As">
               <operand localId="482" locator="174:7-174:10" xsi:type="Null"/>
               <asTypeSpecifier localId="484" locator="174:15-174:32" xsi:type="IntervalTypeSpecifier">
                  <pointType localId="483" locator="174:24-174:31" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand name="choice">
            <operandTypeSpecifier localId="167" locator="155:42-155:137" xsi:type="ChoiceTypeSpecifier">
               <choice localId="160" locator="155:49-155:61" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               <choice localId="161" locator="155:64-155:74" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               <choice localId="162" locator="155:77-155:87" name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
               <choice localId="163" locator="155:90-155:101" name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
               <choice localId="164" locator="155:104-155:114" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
               <choice localId="165" locator="155:117-155:124" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
               <choice localId="166" locator="155:127-155:136" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="312" locator="94:1-98:3" name="mostRecent" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="312">
               <a:s>define fluent function mostRecent(immunizations List&lt;Immunization>):
  </a:s>
               <a:s r="311">
                  <a:s r="311">
                     <a:s>Last(
    </a:s>
                     <a:s r="310">
                        <a:s>
                           <a:s r="304">
                              <a:s r="303">
                                 <a:s>
                                    <a:s>immunizations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> I</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="309">
                           <a:s>sort by </a:s>
                           <a:s r="308">
                              <a:s r="307">
                                 <a:s>start of </a:s>
                                 <a:s r="306">
                                    <a:s r="305">
                                       <a:s>occurrence</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="306">
                                       <a:s>toInterval()</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="311" locator="95:3-98:3" xsi:type="Last">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="310" locator="96:5-97:46" xsi:type="Query">
               <source localId="304" locator="96:5-96:19" alias="I">
                  <expression localId="303" locator="96:5-96:17" name="immunizations" xsi:type="OperandRef"/>
               </source>
               <sort localId="309" locator="97:7-97:46">
                  <by localId="308" locator="97:15-97:46" direction="asc" xsi:type="ByExpression">
                     <expression localId="307" locator="97:15-97:46" xsi:type="Start">
                        <operand localId="306" locator="97:24-97:46" name="toInterval" xsi:type="FunctionRef">
                           <operand localId="305" locator="97:24-97:33" name="occurrence" xsi:type="IdentifierRef"/>
                        </operand>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="immunizations">
            <operandTypeSpecifier localId="302" locator="94:49-94:66" xsi:type="ListTypeSpecifier">
               <elementType localId="301" locator="94:54-94:65" name="fhir:Immunization" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="322" locator="100:1-104:3" name="mostRecent" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="322">
               <a:s>define fluent function mostRecent(medicationRequests List&lt;MedicationRequest>):
  </a:s>
               <a:s r="321">
                  <a:s r="321">
                     <a:s>Last(
    </a:s>
                     <a:s r="320">
                        <a:s>
                           <a:s r="316">
                              <a:s r="315">
                                 <a:s>
                                    <a:s>medicationRequests</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MR</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="319">
                           <a:s>sort by </a:s>
                           <a:s r="318">
                              <a:s r="317">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="321" locator="101:3-104:3" xsi:type="Last">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="320" locator="102:5-103:24" xsi:type="Query">
               <source localId="316" locator="102:5-102:25" alias="MR">
                  <expression localId="315" locator="102:5-102:22" name="medicationRequests" xsi:type="OperandRef"/>
               </source>
               <sort localId="319" locator="103:7-103:24">
                  <by localId="318" locator="103:15-103:24" direction="asc" path="authoredOn" xsi:type="ByColumn"/>
               </sort>
            </source>
         </expression>
         <operand name="medicationRequests">
            <operandTypeSpecifier localId="314" locator="100:54-100:76" xsi:type="ListTypeSpecifier">
               <elementType localId="313" locator="100:59-100:75" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="336" locator="106:1-110:3" name="lowest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="336">
               <a:s>define fluent function lowest(observations List&lt;Observation>):
  </a:s>
               <a:s r="335">
                  <a:s r="335">
                     <a:s>First(
    </a:s>
                     <a:s r="334">
                        <a:s>
                           <a:s r="326">
                              <a:s r="325">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="333">
                           <a:s>sort by </a:s>
                           <a:s r="332">
                              <a:s r="331">
                                 <a:s r="327">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="331">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="330">
                                       <a:s r="328">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="329">
                                          <a:s>FHIR.Quantity</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="335" locator="107:3-110:3" xsi:type="First">
            <source localId="334" locator="108:5-109:60" xsi:type="Query">
               <source localId="326" locator="108:5-108:18" alias="O">
                  <expression localId="325" locator="108:5-108:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="333" locator="109:7-109:60">
                  <by localId="332" locator="109:15-109:60" direction="asc" xsi:type="ByExpression">
                     <expression localId="331" locator="109:15-109:60" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="330" locator="109:38-109:59" strict="false" xsi:type="As">
                           <operand localId="328" locator="109:38-109:42" name="value" xsi:type="IdentifierRef"/>
                           <asTypeSpecifier localId="329" locator="109:47-109:59" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="324" locator="106:44-106:60" xsi:type="ListTypeSpecifier">
               <elementType localId="323" locator="106:49-106:59" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="350" locator="112:1-116:3" name="highest" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="350">
               <a:s>define fluent function highest(observations List&lt;Observation>):
  </a:s>
               <a:s r="349">
                  <a:s r="349">
                     <a:s>Last(
    </a:s>
                     <a:s r="348">
                        <a:s>
                           <a:s r="340">
                              <a:s r="339">
                                 <a:s>
                                    <a:s>observations</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="347">
                           <a:s>sort by </a:s>
                           <a:s r="346">
                              <a:s r="345">
                                 <a:s r="341">
                                    <a:s>FHIRHelpers</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="345">
                                    <a:s>ToQuantity(</a:s>
                                    <a:s r="344">
                                       <a:s r="342">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s> as </a:s>
                                       <a:s r="343">
                                          <a:s>FHIR.Quantity</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="349" locator="113:3-116:3" xsi:type="Last">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="348" locator="114:5-115:60" xsi:type="Query">
               <source localId="340" locator="114:5-114:18" alias="O">
                  <expression localId="339" locator="114:5-114:16" name="observations" xsi:type="OperandRef"/>
               </source>
               <sort localId="347" locator="115:7-115:60">
                  <by localId="346" locator="115:15-115:60" direction="asc" xsi:type="ByExpression">
                     <expression localId="345" locator="115:15-115:60" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="344" locator="115:38-115:59" strict="false" xsi:type="As">
                           <operand localId="342" locator="115:38-115:42" name="value" xsi:type="IdentifierRef"/>
                           <asTypeSpecifier localId="343" locator="115:47-115:59" name="fhir:Quantity" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </expression>
                  </by>
               </sort>
            </source>
         </expression>
         <operand name="observations">
            <operandTypeSpecifier localId="338" locator="112:45-112:61" xsi:type="ListTypeSpecifier">
               <elementType localId="337" locator="112:50-112:60" name="fhir:Observation" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="355" locator="118:1-119:12" name="EarliestOf" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="355">
               <a:s>define function EarliestOf(dates List&lt;Date>):
  </a:s>
               <a:s r="354">
                  <a:s r="354">
                     <a:s>Min(</a:s>
                     <a:s r="353">
                        <a:s>dates</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="354" locator="119:3-119:12" xsi:type="Min">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="t:Date" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="353" locator="119:7-119:11" name="dates" xsi:type="OperandRef"/>
         </expression>
         <operand name="dates">
            <operandTypeSpecifier localId="352" locator="118:34-118:43" xsi:type="ListTypeSpecifier">
               <elementType localId="351" locator="118:39-118:42" name="t:Date" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="360" locator="121:1-122:12" name="LatestOf" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="360">
               <a:s>define function LatestOf(dates List&lt;Date>):
  </a:s>
               <a:s r="359">
                  <a:s r="359">
                     <a:s>Max(</a:s>
                     <a:s r="358">
                        <a:s>dates</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="359" locator="122:3-122:12" xsi:type="Max">
            <signature xsi:type="ListTypeSpecifier">
               <elementType name="t:Date" xsi:type="NamedTypeSpecifier"/>
            </signature>
            <source localId="358" locator="122:7-122:11" name="dates" xsi:type="OperandRef"/>
         </expression>
         <operand name="dates">
            <operandTypeSpecifier localId="357" locator="121:32-121:41" xsi:type="ListTypeSpecifier">
               <elementType localId="356" locator="121:37-121:40" name="t:Date" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="607" locator="182:1-198:8" name="abatementInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized Abatement of a given Condition resource."/>
            <a:t name="comment" value="NOTE: Due to the complexity of determining an interval from a String, this function will throw&#xa;a run-time exception if used with a Condition instance that has a String as the abatement value."/>
            <a:s r="607">
               <a:s>/*
@description: Returns an interval representing the normalized Abatement of a given Condition resource.
@comment: NOTE: Due to the complexity of determining an interval from a String, this function will throw
a run-time exception if used with a Condition instance that has a String as the abatement value.
*/
define fluent function abatementInterval(condition Condition):
  </a:s>
               <a:s r="606">
                  <a:s r="606">
                     <a:s>if </a:s>
                     <a:s r="492">
                        <a:s r="490">
                           <a:s r="489">
                              <a:s>condition</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="490">
                              <a:s>abatement</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is </a:s>
                        <a:s r="491">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then
    </a:s>
                     <a:s r="505">
                        <a:s>Interval[</a:s>
                        <a:s r="498">
                           <a:s r="493">
                              <a:s>FHIRHelpers</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="498">
                              <a:s>ToDateTime(</a:s>
                              <a:s r="497">
                                 <a:s r="495">
                                    <a:s r="494">
                                       <a:s>condition</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="495">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="496">
                                    <a:s>FHIR.dateTime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="504">
                           <a:s r="499">
                              <a:s>FHIRHelpers</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="504">
                              <a:s>ToDateTime(</a:s>
                              <a:s r="503">
                                 <a:s r="501">
                                    <a:s r="500">
                                       <a:s>condition</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="501">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="502">
                                    <a:s>FHIR.dateTime</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>
  else </a:s>
                     <a:s r="605">
                        <a:s>if </a:s>
                        <a:s r="509">
                           <a:s r="507">
                              <a:s r="506">
                                 <a:s>condition</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="507">
                                 <a:s>abatement</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="508">
                              <a:s>FHIR.Period</a:s>
                           </a:s>
                        </a:s>
                        <a:s> then
    </a:s>
                        <a:s r="515">
                           <a:s r="510">
                              <a:s>FHIRHelpers</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="515">
                              <a:s>ToInterval(</a:s>
                              <a:s r="514">
                                 <a:s r="512">
                                    <a:s r="511">
                                       <a:s>condition</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="512">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> as </a:s>
                                 <a:s r="513">
                                    <a:s>FHIR.Period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  else </a:s>
                        <a:s r="604">
                           <a:s>if </a:s>
                           <a:s r="519">
                              <a:s r="517">
                                 <a:s r="516">
                                    <a:s>condition</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="517">
                                    <a:s>abatement</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is </a:s>
                              <a:s r="518">
                                 <a:s>FHIR.string</a:s>
                              </a:s>
                           </a:s>
                           <a:s> then
    </a:s>
                           <a:s r="528">
                              <a:s>Message(</a:s>
                              <a:s r="523">
                                 <a:s r="520">null as </a:s>
                                 <a:s r="522">
                                    <a:s>Interval&lt;</a:s>
                                    <a:s r="521">
                                       <a:s>DateTime</a:s>
                                    </a:s>
                                    <a:s>></a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="524">, true, </a:s>
                              <a:s r="525">
                                 <a:s>'NOT_IMPLEMENTED'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="526">
                                 <a:s>'Error'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="527">
                                 <a:s>'Calculation of an interval from a String value is not supported'</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s>
  else </a:s>
                           <a:s r="603">
                              <a:s>if </a:s>
                              <a:s r="532">
                                 <a:s r="530">
                                    <a:s r="529">
                                       <a:s>condition</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="530">
                                       <a:s>abatement</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is </a:s>
                                 <a:s r="531">
                                    <a:s>FHIR.Age</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> then
    </a:s>
                              <a:s r="557">
                                 <a:s>Interval[</a:s>
                                 <a:s r="543">
                                    <a:s r="536">
                                       <a:s r="533">
                                          <a:s>FHIRHelpers</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="536">
                                          <a:s>ToDate(</a:s>
                                          <a:s r="535">
                                             <a:s r="534">
                                                <a:s>Patient</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="535">
                                                <a:s>birthDate</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="542">
                                       <a:s r="537">
                                          <a:s>FHIRHelpers</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="542">
                                          <a:s>ToQuantity(</a:s>
                                          <a:s r="541">
                                             <a:s r="539">
                                                <a:s r="538">
                                                   <a:s>condition</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="539">
                                                   <a:s>abatement</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> as </a:s>
                                             <a:s r="540">
                                                <a:s>FHIR.Age</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>,
      </a:s>
                                 <a:s r="556">
                                    <a:s r="554">
                                       <a:s r="547">
                                          <a:s r="544">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="547">
                                             <a:s>ToDate(</a:s>
                                             <a:s r="546">
                                                <a:s r="545">
                                                   <a:s>Patient</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="546">
                                                   <a:s>birthDate</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="553">
                                          <a:s r="548">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="553">
                                             <a:s>ToQuantity(</a:s>
                                             <a:s r="552">
                                                <a:s r="550">
                                                   <a:s r="549">
                                                      <a:s>condition</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="550">
                                                      <a:s>abatement</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> as </a:s>
                                                <a:s r="551">
                                                   <a:s>FHIR.Age</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="555">
                                       <a:s>1 year</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>
  else </a:s>
                              <a:s r="602">
                                 <a:s>if </a:s>
                                 <a:s r="561">
                                    <a:s r="559">
                                       <a:s r="558">
                                          <a:s>condition</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="559">
                                          <a:s>abatement</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> is </a:s>
                                    <a:s r="560">
                                       <a:s>FHIR.Range</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> then
    </a:s>
                                 <a:s r="588">
                                    <a:s>Interval[</a:s>
                                    <a:s r="573">
                                       <a:s r="565">
                                          <a:s r="562">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="565">
                                             <a:s>ToDate(</a:s>
                                             <a:s r="564">
                                                <a:s r="563">
                                                   <a:s>Patient</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="564">
                                                   <a:s>birthDate</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="572">
                                          <a:s r="566">
                                             <a:s>FHIRHelpers</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="572">
                                             <a:s>ToQuantity(</a:s>
                                             <a:s r="571">
                                                <a:s r="570">
                                                   <a:s>(</a:s>
                                                   <a:s r="570">
                                                      <a:s r="568">
                                                         <a:s r="567">
                                                            <a:s>condition</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="568">
                                                            <a:s>abatement</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> as </a:s>
                                                      <a:s r="569">
                                                         <a:s>FHIR.Range</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>)</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="571">
                                                   <a:s>low</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>,
      </a:s>
                                    <a:s r="587">
                                       <a:s r="585">
                                          <a:s r="577">
                                             <a:s r="574">
                                                <a:s>FHIRHelpers</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="577">
                                                <a:s>ToDate(</a:s>
                                                <a:s r="576">
                                                   <a:s r="575">
                                                      <a:s>Patient</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="576">
                                                      <a:s>birthDate</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> + </a:s>
                                          <a:s r="584">
                                             <a:s r="578">
                                                <a:s>FHIRHelpers</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="584">
                                                <a:s>ToQuantity(</a:s>
                                                <a:s r="583">
                                                   <a:s r="582">
                                                      <a:s>(</a:s>
                                                      <a:s r="582">
                                                         <a:s r="580">
                                                            <a:s r="579">
                                                               <a:s>condition</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="580">
                                                               <a:s>abatement</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> as </a:s>
                                                         <a:s r="581">
                                                            <a:s>FHIR.Range</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>)</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="583">
                                                      <a:s>high</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>)</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="586">
                                          <a:s>1 year</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                                 <a:s>
  else </a:s>
                                 <a:s r="601">
                                    <a:s>if </a:s>
                                    <a:s r="592">
                                       <a:s r="590">
                                          <a:s r="589">
                                             <a:s>condition</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="590">
                                             <a:s>abatement</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> is </a:s>
                                       <a:s r="591">
                                          <a:s>FHIR.boolean</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> then
    </a:s>
                                    <a:s r="599">
                                       <a:s>Interval[</a:s>
                                       <a:s r="596">
                                          <a:s>end of </a:s>
                                          <a:s r="595">
                                             <a:s r="594">
                                                <a:s r="593">
                                                   <a:s>condition</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="594">
                                                   <a:s>onset</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="595">
                                                <a:s>toInterval()</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="598">
                                          <a:s r="597">
                                             <a:s>condition</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="598">
                                             <a:s>recordedDate</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                    <a:s r="600">
  else 
    null</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="606" locator="183:3-198:8" xsi:type="If">
            <condition localId="492" locator="183:6-183:41" xsi:type="Is">
               <operand localId="490" locator="183:6-183:24" path="abatement" xsi:type="Property">
                  <source localId="489" locator="183:6-183:14" name="condition" xsi:type="OperandRef"/>
               </operand>
               <isTypeSpecifier localId="491" locator="183:29-183:41" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
            </condition>
            <then localId="505" locator="184:5-184:136" lowClosed="true" highClosed="true" xsi:type="Interval">
               <low localId="498" locator="184:14-184:73" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="497" locator="184:37-184:72" strict="false" xsi:type="As">
                     <operand localId="495" locator="184:37-184:55" path="abatement" xsi:type="Property">
                        <source localId="494" locator="184:37-184:45" name="condition" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="496" locator="184:60-184:72" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </low>
               <high localId="504" locator="184:76-184:135" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="503" locator="184:99-184:134" strict="false" xsi:type="As">
                     <operand localId="501" locator="184:99-184:117" path="abatement" xsi:type="Property">
                        <source localId="500" locator="184:99-184:107" name="condition" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="502" locator="184:122-184:134" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </high>
            </then>
            <else localId="605" locator="185:8-198:8" xsi:type="If">
               <condition localId="509" locator="185:11-185:44" xsi:type="Is">
                  <operand localId="507" locator="185:11-185:29" path="abatement" xsi:type="Property">
                     <source localId="506" locator="185:11-185:19" name="condition" xsi:type="OperandRef"/>
                  </operand>
                  <isTypeSpecifier localId="508" locator="185:34-185:44" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </condition>
               <then localId="515" locator="186:5-186:62" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <signature name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="514" locator="186:28-186:61" strict="false" xsi:type="As">
                     <operand localId="512" locator="186:28-186:46" path="abatement" xsi:type="Property">
                        <source localId="511" locator="186:28-186:36" name="condition" xsi:type="OperandRef"/>
                     </operand>
                     <asTypeSpecifier localId="513" locator="186:51-186:61" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                  </operand>
               </then>
               <else localId="604" locator="187:8-198:8" xsi:type="If">
                  <condition localId="519" locator="187:11-187:44" xsi:type="Is">
                     <operand localId="517" locator="187:11-187:29" path="abatement" xsi:type="Property">
                        <source localId="516" locator="187:11-187:19" name="condition" xsi:type="OperandRef"/>
                     </operand>
                     <isTypeSpecifier localId="518" locator="187:34-187:44" name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                  </condition>
                  <then localId="528" locator="188:5-188:140" xsi:type="Message">
                     <source localId="523" locator="188:13-188:38" strict="false" xsi:type="As">
                        <operand localId="520" locator="188:13-188:16" xsi:type="Null"/>
                        <asTypeSpecifier localId="522" locator="188:21-188:38" xsi:type="IntervalTypeSpecifier">
                           <pointType localId="521" locator="188:30-188:37" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                        </asTypeSpecifier>
                     </source>
                     <condition localId="524" locator="188:41-188:44" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                     <code localId="525" locator="188:47-188:63" valueType="t:String" value="NOT_IMPLEMENTED" xsi:type="Literal"/>
                     <severity localId="526" locator="188:66-188:72" valueType="t:String" value="Error" xsi:type="Literal"/>
                     <message localId="527" locator="188:75-188:139" valueType="t:String" value="Calculation of an interval from a String value is not supported" xsi:type="Literal"/>
                  </then>
                  <else localId="603" locator="189:8-198:8" xsi:type="If">
                     <condition localId="532" locator="189:11-189:41" xsi:type="Is">
                        <operand localId="530" locator="189:11-189:29" path="abatement" xsi:type="Property">
                           <source localId="529" locator="189:11-189:19" name="condition" xsi:type="OperandRef"/>
                        </operand>
                        <isTypeSpecifier localId="531" locator="189:34-189:41" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                     </condition>
                     <then xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <operand path="low" xsi:type="Property">
                              <source localId="557" locator="190:5-191:111" lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low localId="543" locator="190:14-190:108" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="536" locator="190:14-190:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="535" locator="190:33-190:49" path="birthDate" xsi:type="Property">
                                          <source localId="534" locator="190:33-190:39" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="542" locator="190:54-190:108" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="541" locator="190:77-190:107" strict="false" xsi:type="As">
                                          <operand localId="539" locator="190:77-190:95" path="abatement" xsi:type="Property">
                                             <source localId="538" locator="190:77-190:85" name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                          <asTypeSpecifier localId="540" locator="190:100-190:107" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                 </low>
                                 <high localId="556" locator="191:7-191:110" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="554" locator="191:7-191:101" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="547" locator="191:7-191:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="546" locator="191:26-191:42" path="birthDate" xsi:type="Property">
                                             <source localId="545" locator="191:26-191:32" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="553" locator="191:47-191:101" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="552" locator="191:70-191:100" strict="false" xsi:type="As">
                                             <operand localId="550" locator="191:70-191:88" path="abatement" xsi:type="Property">
                                                <source localId="549" locator="191:70-191:78" name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                             <asTypeSpecifier localId="551" locator="191:93-191:100" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                    </operand>
                                    <operand localId="555" locator="191:105-191:110" value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="557" locator="190:5-191:111" lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low localId="543" locator="190:14-190:108" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="536" locator="190:14-190:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="535" locator="190:33-190:49" path="birthDate" xsi:type="Property">
                                       <source localId="534" locator="190:33-190:39" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="542" locator="190:54-190:108" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="541" locator="190:77-190:107" strict="false" xsi:type="As">
                                       <operand localId="539" locator="190:77-190:95" path="abatement" xsi:type="Property">
                                          <source localId="538" locator="190:77-190:85" name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                       <asTypeSpecifier localId="540" locator="190:100-190:107" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                              </low>
                              <high localId="556" locator="191:7-191:110" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="554" locator="191:7-191:101" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="547" locator="191:7-191:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="546" locator="191:26-191:42" path="birthDate" xsi:type="Property">
                                          <source localId="545" locator="191:26-191:32" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="553" locator="191:47-191:101" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="552" locator="191:70-191:100" strict="false" xsi:type="As">
                                          <operand localId="550" locator="191:70-191:88" path="abatement" xsi:type="Property">
                                             <source localId="549" locator="191:70-191:78" name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                          <asTypeSpecifier localId="551" locator="191:93-191:100" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                 </operand>
                                 <operand localId="555" locator="191:105-191:110" value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                           <operand path="high" xsi:type="Property">
                              <source localId="557" locator="190:5-191:111" lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low localId="543" locator="190:14-190:108" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="536" locator="190:14-190:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="535" locator="190:33-190:49" path="birthDate" xsi:type="Property">
                                          <source localId="534" locator="190:33-190:39" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="542" locator="190:54-190:108" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="541" locator="190:77-190:107" strict="false" xsi:type="As">
                                          <operand localId="539" locator="190:77-190:95" path="abatement" xsi:type="Property">
                                             <source localId="538" locator="190:77-190:85" name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                          <asTypeSpecifier localId="540" locator="190:100-190:107" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                 </low>
                                 <high localId="556" locator="191:7-191:110" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="554" locator="191:7-191:101" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="547" locator="191:7-191:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="546" locator="191:26-191:42" path="birthDate" xsi:type="Property">
                                             <source localId="545" locator="191:26-191:32" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="553" locator="191:47-191:101" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="552" locator="191:70-191:100" strict="false" xsi:type="As">
                                             <operand localId="550" locator="191:70-191:88" path="abatement" xsi:type="Property">
                                                <source localId="549" locator="191:70-191:78" name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                             <asTypeSpecifier localId="551" locator="191:93-191:100" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                          </operand>
                                       </operand>
                                    </operand>
                                    <operand localId="555" locator="191:105-191:110" value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="557" locator="190:5-191:111" lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low localId="543" locator="190:14-190:108" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="536" locator="190:14-190:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="535" locator="190:33-190:49" path="birthDate" xsi:type="Property">
                                       <source localId="534" locator="190:33-190:39" name="Patient" xsi:type="ExpressionRef"/>
                                    </operand>
                                 </operand>
                                 <operand localId="542" locator="190:54-190:108" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="541" locator="190:77-190:107" strict="false" xsi:type="As">
                                       <operand localId="539" locator="190:77-190:95" path="abatement" xsi:type="Property">
                                          <source localId="538" locator="190:77-190:85" name="condition" xsi:type="OperandRef"/>
                                       </operand>
                                       <asTypeSpecifier localId="540" locator="190:100-190:107" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                    </operand>
                                 </operand>
                              </low>
                              <high localId="556" locator="191:7-191:110" xsi:type="Add">
                                 <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                 <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="554" locator="191:7-191:101" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="547" locator="191:7-191:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="546" locator="191:26-191:42" path="birthDate" xsi:type="Property">
                                          <source localId="545" locator="191:26-191:32" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="553" locator="191:47-191:101" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="552" locator="191:70-191:100" strict="false" xsi:type="As">
                                          <operand localId="550" locator="191:70-191:88" path="abatement" xsi:type="Property">
                                             <source localId="549" locator="191:70-191:78" name="condition" xsi:type="OperandRef"/>
                                          </operand>
                                          <asTypeSpecifier localId="551" locator="191:93-191:100" name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                                       </operand>
                                    </operand>
                                 </operand>
                                 <operand localId="555" locator="191:105-191:110" value="1" unit="year" xsi:type="Quantity"/>
                              </high>
                           </source>
                        </highClosedExpression>
                     </then>
                     <else localId="602" locator="192:8-198:8" xsi:type="If">
                        <condition localId="561" locator="192:11-192:43" xsi:type="Is">
                           <operand localId="559" locator="192:11-192:29" path="abatement" xsi:type="Property">
                              <source localId="558" locator="192:11-192:19" name="condition" xsi:type="OperandRef"/>
                           </operand>
                           <isTypeSpecifier localId="560" locator="192:34-192:43" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                        </condition>
                        <then xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <operand path="low" xsi:type="Property">
                                 <source localId="588" locator="193:5-194:120" lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low localId="573" locator="193:14-193:116" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="565" locator="193:14-193:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="564" locator="193:33-193:49" path="birthDate" xsi:type="Property">
                                             <source localId="563" locator="193:33-193:39" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="572" locator="193:54-193:116" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="571" locator="193:77-193:115" path="low" xsi:type="Property">
                                             <source localId="570" locator="193:77-193:111" strict="false" xsi:type="As">
                                                <operand localId="568" locator="193:78-193:96" path="abatement" xsi:type="Property">
                                                   <source localId="567" locator="193:78-193:86" name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                                <asTypeSpecifier localId="569" locator="193:101-193:110" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                             </source>
                                          </operand>
                                       </operand>
                                    </low>
                                    <high localId="587" locator="194:7-194:119" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="585" locator="194:7-194:110" xsi:type="Add">
                                          <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                          <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="577" locator="194:7-194:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand localId="576" locator="194:26-194:42" path="birthDate" xsi:type="Property">
                                                <source localId="575" locator="194:26-194:32" name="Patient" xsi:type="ExpressionRef"/>
                                             </operand>
                                          </operand>
                                          <operand localId="584" locator="194:47-194:110" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand localId="583" locator="194:70-194:109" path="high" xsi:type="Property">
                                                <source localId="582" locator="194:70-194:104" strict="false" xsi:type="As">
                                                   <operand localId="580" locator="194:71-194:89" path="abatement" xsi:type="Property">
                                                      <source localId="579" locator="194:71-194:79" name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                   <asTypeSpecifier localId="581" locator="194:94-194:103" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                                </source>
                                             </operand>
                                          </operand>
                                       </operand>
                                       <operand localId="586" locator="194:114-194:119" value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source localId="588" locator="193:5-194:120" lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low localId="573" locator="193:14-193:116" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="565" locator="193:14-193:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="564" locator="193:33-193:49" path="birthDate" xsi:type="Property">
                                          <source localId="563" locator="193:33-193:39" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="572" locator="193:54-193:116" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="571" locator="193:77-193:115" path="low" xsi:type="Property">
                                          <source localId="570" locator="193:77-193:111" strict="false" xsi:type="As">
                                             <operand localId="568" locator="193:78-193:96" path="abatement" xsi:type="Property">
                                                <source localId="567" locator="193:78-193:86" name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                             <asTypeSpecifier localId="569" locator="193:101-193:110" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                          </source>
                                       </operand>
                                    </operand>
                                 </low>
                                 <high localId="587" locator="194:7-194:119" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="585" locator="194:7-194:110" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="577" locator="194:7-194:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="576" locator="194:26-194:42" path="birthDate" xsi:type="Property">
                                             <source localId="575" locator="194:26-194:32" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="584" locator="194:47-194:110" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="583" locator="194:70-194:109" path="high" xsi:type="Property">
                                             <source localId="582" locator="194:70-194:104" strict="false" xsi:type="As">
                                                <operand localId="580" locator="194:71-194:89" path="abatement" xsi:type="Property">
                                                   <source localId="579" locator="194:71-194:79" name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                                <asTypeSpecifier localId="581" locator="194:94-194:103" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                             </source>
                                          </operand>
                                       </operand>
                                    </operand>
                                    <operand localId="586" locator="194:114-194:119" value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                              <operand path="high" xsi:type="Property">
                                 <source localId="588" locator="193:5-194:120" lowClosed="true" highClosed="false" xsi:type="Interval">
                                    <low localId="573" locator="193:14-193:116" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="565" locator="193:14-193:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="564" locator="193:33-193:49" path="birthDate" xsi:type="Property">
                                             <source localId="563" locator="193:33-193:39" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="572" locator="193:54-193:116" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="571" locator="193:77-193:115" path="low" xsi:type="Property">
                                             <source localId="570" locator="193:77-193:111" strict="false" xsi:type="As">
                                                <operand localId="568" locator="193:78-193:96" path="abatement" xsi:type="Property">
                                                   <source localId="567" locator="193:78-193:86" name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                                <asTypeSpecifier localId="569" locator="193:101-193:110" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                             </source>
                                          </operand>
                                       </operand>
                                    </low>
                                    <high localId="587" locator="194:7-194:119" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="585" locator="194:7-194:110" xsi:type="Add">
                                          <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                          <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                          <operand localId="577" locator="194:7-194:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand localId="576" locator="194:26-194:42" path="birthDate" xsi:type="Property">
                                                <source localId="575" locator="194:26-194:32" name="Patient" xsi:type="ExpressionRef"/>
                                             </operand>
                                          </operand>
                                          <operand localId="584" locator="194:47-194:110" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                             <operand localId="583" locator="194:70-194:109" path="high" xsi:type="Property">
                                                <source localId="582" locator="194:70-194:104" strict="false" xsi:type="As">
                                                   <operand localId="580" locator="194:71-194:89" path="abatement" xsi:type="Property">
                                                      <source localId="579" locator="194:71-194:79" name="condition" xsi:type="OperandRef"/>
                                                   </operand>
                                                   <asTypeSpecifier localId="581" locator="194:94-194:103" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                                </source>
                                             </operand>
                                          </operand>
                                       </operand>
                                       <operand localId="586" locator="194:114-194:119" value="1" unit="year" xsi:type="Quantity"/>
                                    </high>
                                 </source>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source localId="588" locator="193:5-194:120" lowClosed="true" highClosed="false" xsi:type="Interval">
                                 <low localId="573" locator="193:14-193:116" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="565" locator="193:14-193:50" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="564" locator="193:33-193:49" path="birthDate" xsi:type="Property">
                                          <source localId="563" locator="193:33-193:39" name="Patient" xsi:type="ExpressionRef"/>
                                       </operand>
                                    </operand>
                                    <operand localId="572" locator="193:54-193:116" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="571" locator="193:77-193:115" path="low" xsi:type="Property">
                                          <source localId="570" locator="193:77-193:111" strict="false" xsi:type="As">
                                             <operand localId="568" locator="193:78-193:96" path="abatement" xsi:type="Property">
                                                <source localId="567" locator="193:78-193:86" name="condition" xsi:type="OperandRef"/>
                                             </operand>
                                             <asTypeSpecifier localId="569" locator="193:101-193:110" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                          </source>
                                       </operand>
                                    </operand>
                                 </low>
                                 <high localId="587" locator="194:7-194:119" xsi:type="Add">
                                    <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                    <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                    <operand localId="585" locator="194:7-194:110" xsi:type="Add">
                                       <signature name="t:Date" xsi:type="NamedTypeSpecifier"/>
                                       <signature name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
                                       <operand localId="577" locator="194:7-194:43" name="ToDate" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="576" locator="194:26-194:42" path="birthDate" xsi:type="Property">
                                             <source localId="575" locator="194:26-194:32" name="Patient" xsi:type="ExpressionRef"/>
                                          </operand>
                                       </operand>
                                       <operand localId="584" locator="194:47-194:110" name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="583" locator="194:70-194:109" path="high" xsi:type="Property">
                                             <source localId="582" locator="194:70-194:104" strict="false" xsi:type="As">
                                                <operand localId="580" locator="194:71-194:89" path="abatement" xsi:type="Property">
                                                   <source localId="579" locator="194:71-194:79" name="condition" xsi:type="OperandRef"/>
                                                </operand>
                                                <asTypeSpecifier localId="581" locator="194:94-194:103" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                                             </source>
                                          </operand>
                                       </operand>
                                    </operand>
                                    <operand localId="586" locator="194:114-194:119" value="1" unit="year" xsi:type="Quantity"/>
                                 </high>
                              </source>
                           </highClosedExpression>
                        </then>
                        <else localId="601" locator="195:8-198:8" xsi:type="If">
                           <condition localId="592" locator="195:11-195:45" xsi:type="Is">
                              <operand localId="590" locator="195:11-195:29" path="abatement" xsi:type="Property">
                                 <source localId="589" locator="195:11-195:19" name="condition" xsi:type="OperandRef"/>
                              </operand>
                              <isTypeSpecifier localId="591" locator="195:34-195:45" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                           </condition>
                           <then localId="599" locator="196:5-196:73" lowClosed="true" highClosed="false" xsi:type="Interval">
                              <low localId="596" locator="196:14-196:48" xsi:type="End">
                                 <operand localId="595" locator="196:21-196:48" name="toInterval" xsi:type="FunctionRef">
                                    <operand localId="594" locator="196:21-196:35" path="onset" xsi:type="Property">
                                       <source localId="593" locator="196:21-196:29" name="condition" xsi:type="OperandRef"/>
                                    </operand>
                                 </operand>
                              </low>
                              <high name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <signature name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                                 <operand localId="598" locator="196:51-196:72" path="recordedDate" xsi:type="Property">
                                    <source localId="597" locator="196:51-196:59" name="condition" xsi:type="OperandRef"/>
                                 </operand>
                              </high>
                           </then>
                           <else xsi:type="As">
                              <operand localId="600" locator="198:5-198:8" xsi:type="Null"/>
                              <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                                 <pointType name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
                              </asTypeSpecifier>
                           </else>
                        </else>
                     </else>
                  </else>
               </else>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier localId="488" locator="182:52-182:60" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="653" locator="205:1-216:70" name="prevalenceInterval" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns an interval representing the normalized prevalence period of a given Condition resource."/>
            <a:t name="comment" value="Uses the toInterval and toAbatementInterval functions to determine the widest potential interval from&#xa;onset to abatement as specified in the given Condition."/>
            <a:s r="653">
               <a:s>/*
@description: Returns an interval representing the normalized prevalence period of a given Condition resource.
@comment: Uses the toInterval and toAbatementInterval functions to determine the widest potential interval from
onset to abatement as specified in the given Condition.
*/
define fluent function prevalenceInterval(condition Condition):
</a:s>
               <a:s r="652">
                  <a:s r="652">
                     <a:s>if </a:s>
                     <a:s r="622">
                        <a:s r="617">
                           <a:s r="612">
                              <a:s r="610">
                                 <a:s r="609">
                                    <a:s>condition</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="610">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="611">
                                 <a:s>&quot;active&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  or </a:s>
                           <a:s r="616">
                              <a:s r="614">
                                 <a:s r="613">
                                    <a:s>condition</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="614">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="615">
                                 <a:s>&quot;recurrence&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  or </a:s>
                        <a:s r="621">
                           <a:s r="619">
                              <a:s r="618">
                                 <a:s>condition</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="619">
                                 <a:s>clinicalStatus</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="620">
                              <a:s>&quot;relapse&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> then
  </a:s>
                     <a:s r="630">
                        <a:s>Interval[</a:s>
                        <a:s r="626">
                           <a:s>start of </a:s>
                           <a:s r="625">
                              <a:s r="624">
                                 <a:s r="623">
                                    <a:s>condition</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="624">
                                    <a:s>onset</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="625">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="629">
                           <a:s>end of </a:s>
                           <a:s r="628">
                              <a:s r="627">
                                 <a:s>condition</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="628">
                                 <a:s>abatementInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>]</a:s>
                     </a:s>
                     <a:s>
else
  </a:s>
                     <a:s r="651">
                        <a:s>
                           <a:s r="634">
                              <a:s r="633">
                                 <a:s>(</a:s>
                                 <a:s r="633">
                                    <a:s>end of </a:s>
                                    <a:s r="632">
                                       <a:s r="631">
                                          <a:s>condition</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="632">
                                          <a:s>abatementInterval()</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s> abatementDate</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="650">
                           <a:s>return 
	  </a:s>
                           <a:s r="649">
                              <a:s>if </a:s>
                              <a:s r="636">
                                 <a:s r="635">
                                    <a:s>abatementDate</a:s>
                                 </a:s>
                                 <a:s> is null</a:s>
                              </a:s>
                              <a:s> then
        </a:s>
                              <a:s r="642">
                                 <a:s>Interval[</a:s>
                                 <a:s r="640">
                                    <a:s>start of </a:s>
                                    <a:s r="639">
                                       <a:s r="638">
                                          <a:s r="637">
                                             <a:s>condition</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="638">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="639">
                                          <a:s>toInterval()</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="641">
                                    <a:s>abatementDate</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>
      else
        </a:s>
                              <a:s r="648">
                                 <a:s>Interval[</a:s>
                                 <a:s r="646">
                                    <a:s>start of </a:s>
                                    <a:s r="645">
                                       <a:s r="644">
                                          <a:s r="643">
                                             <a:s>condition</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="644">
                                             <a:s>onset</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="645">
                                          <a:s>toInterval()</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="647">
                                    <a:s>abatementDate</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="652" locator="206:1-216:70" xsi:type="If">
            <condition localId="622" locator="206:4-208:41" xsi:type="Or">
               <operand localId="617" locator="206:4-207:44" xsi:type="Or">
                  <operand localId="612" locator="206:4-206:38" xsi:type="Equivalent">
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="610" locator="206:4-206:27" path="clinicalStatus" xsi:type="Property">
                           <source localId="609" locator="206:4-206:12" name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="611" locator="206:31-206:38" name="active" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand localId="616" locator="207:6-207:44" xsi:type="Equivalent">
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="614" locator="207:6-207:29" path="clinicalStatus" xsi:type="Property">
                           <source localId="613" locator="207:6-207:14" name="condition" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="615" locator="207:33-207:44" name="recurrence" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="621" locator="208:6-208:41" xsi:type="Equivalent">
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="619" locator="208:6-208:29" path="clinicalStatus" xsi:type="Property">
                        <source localId="618" locator="208:6-208:14" name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="620" locator="208:33-208:41" name="relapse" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </condition>
            <then localId="630" locator="209:3-209:87" lowClosed="true" highClosed="true" xsi:type="Interval">
               <low localId="626" locator="209:12-209:48" xsi:type="Start">
                  <operand localId="625" locator="209:21-209:48" name="toInterval" xsi:type="FunctionRef">
                     <operand localId="624" locator="209:21-209:35" path="onset" xsi:type="Property">
                        <source localId="623" locator="209:21-209:29" name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </low>
               <high localId="629" locator="209:51-209:86" xsi:type="End">
                  <operand localId="628" locator="209:58-209:86" name="abatementInterval" xsi:type="FunctionRef">
                     <operand localId="627" locator="209:58-209:66" name="condition" xsi:type="OperandRef"/>
                  </operand>
               </high>
            </then>
            <else localId="651" locator="211:3-216:70" xsi:type="Query">
               <source localId="634" locator="211:3-211:54" alias="abatementDate">
                  <expression localId="633" locator="211:3-211:40" xsi:type="End">
                     <operand localId="632" locator="211:11-211:39" name="abatementInterval" xsi:type="FunctionRef">
                        <operand localId="631" locator="211:11-211:19" name="condition" xsi:type="OperandRef"/>
                     </operand>
                  </expression>
               </source>
               <return localId="650" locator="212:5-216:70">
                  <expression localId="649" locator="213:4-216:70" xsi:type="If">
                     <condition localId="636" locator="213:7-213:27" xsi:type="IsNull">
                        <operand localId="635" locator="213:7-213:19" name="abatementDate" xsi:type="AliasRef"/>
                     </condition>
                     <then localId="642" locator="214:9-214:70" lowClosed="true" highClosed="false" xsi:type="Interval">
                        <low localId="640" locator="214:18-214:54" xsi:type="Start">
                           <operand localId="639" locator="214:27-214:54" name="toInterval" xsi:type="FunctionRef">
                              <operand localId="638" locator="214:27-214:41" path="onset" xsi:type="Property">
                                 <source localId="637" locator="214:27-214:35" name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                        </low>
                        <high localId="641" locator="214:57-214:69" name="abatementDate" xsi:type="AliasRef"/>
                     </then>
                     <else localId="648" locator="216:9-216:70" lowClosed="true" highClosed="true" xsi:type="Interval">
                        <low localId="646" locator="216:18-216:54" xsi:type="Start">
                           <operand localId="645" locator="216:27-216:54" name="toInterval" xsi:type="FunctionRef">
                              <operand localId="644" locator="216:27-216:41" path="onset" xsi:type="Property">
                                 <source localId="643" locator="216:27-216:35" name="condition" xsi:type="OperandRef"/>
                              </operand>
                           </operand>
                        </low>
                        <high localId="647" locator="216:57-216:69" name="abatementDate" xsi:type="AliasRef"/>
                     </else>
                  </expression>
               </return>
            </else>
         </expression>
         <operand name="condition">
            <operandTypeSpecifier localId="608" locator="205:53-205:61" name="fhir:Condition" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="664" locator="223:1-224:53" name="references" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given reference is to the given resource"/>
            <a:t name="comment" value="Returns true if the `id` element of the given resource exactly equals the tail of the given reference.&#xa;NOTE: This function assumes resources from the same source server."/>
            <a:s r="664">
               <a:s>/*
@description: Returns true if the given reference is to the given resource
@comment: Returns true if the `id` element of the given resource exactly equals the tail of the given reference.
NOTE: This function assumes resources from the same source server.
*/
define fluent function references(reference FHIR.Reference, resource FHIR.Resource):
  </a:s>
               <a:s r="663">
                  <a:s r="663">
                     <a:s r="657">
                        <a:s r="656">
                           <a:s>resource</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="657">
                           <a:s>id</a:s>
                        </a:s>
                     </a:s>
                     <a:s> = </a:s>
                     <a:s r="662">
                        <a:s>Last(</a:s>
                        <a:s r="661">
                           <a:s>Split(</a:s>
                           <a:s r="659">
                              <a:s r="658">
                                 <a:s>reference</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="659">
                                 <a:s>reference</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="660">
                              <a:s>'/'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="663" locator="224:3-224:53" xsi:type="Equal">
            <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
            <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
               <signature name="fhir:string" xsi:type="NamedTypeSpecifier"/>
               <operand localId="657" locator="224:3-224:13" path="id" xsi:type="Property">
                  <source localId="656" locator="224:3-224:10" name="resource" xsi:type="OperandRef"/>
               </operand>
            </operand>
            <operand localId="662" locator="224:17-224:53" xsi:type="Last">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="661" locator="224:22-224:52" xsi:type="Split">
                  <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="659" locator="224:28-224:46" path="reference" xsi:type="Property">
                        <source localId="658" locator="224:28-224:36" name="reference" xsi:type="OperandRef"/>
                     </operand>
                  </stringToSplit>
                  <separator localId="660" locator="224:49-224:51" valueType="t:String" value="/" xsi:type="Literal"/>
               </source>
            </operand>
         </expression>
         <operand name="reference">
            <operandTypeSpecifier localId="654" locator="223:45-223:58" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="resource">
            <operandTypeSpecifier localId="655" locator="223:70-223:82" name="fhir:Resource" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="674" locator="231:1-232:52" name="references" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if the given reference is to the given resourceId"/>
            <a:t name="comment" value="Returns true if the `resourceId` parameter exactly equals the tail of the given reference.&#xa;NOTE: This function assumes resources from the same source server."/>
            <a:s r="674">
               <a:s>/*
@description: Returns true if the given reference is to the given resourceId
@comment: Returns true if the `resourceId` parameter exactly equals the tail of the given reference.
NOTE: This function assumes resources from the same source server.
*/
define fluent function references(reference FHIR.Reference, resourceId String):
  </a:s>
               <a:s r="673">
                  <a:s r="673">
                     <a:s r="667">
                        <a:s>resourceId</a:s>
                     </a:s>
                     <a:s> = </a:s>
                     <a:s r="672">
                        <a:s>Last(</a:s>
                        <a:s r="671">
                           <a:s>Split(</a:s>
                           <a:s r="669">
                              <a:s r="668">
                                 <a:s>reference</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="669">
                                 <a:s>reference</a:s>
                              </a:s>
                           </a:s>
                           <a:s>, </a:s>
                           <a:s r="670">
                              <a:s>'/'</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="673" locator="232:3-232:52" xsi:type="Equal">
            <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
            <operand localId="667" locator="232:3-232:12" name="resourceId" xsi:type="OperandRef"/>
            <operand localId="672" locator="232:16-232:52" xsi:type="Last">
               <signature xsi:type="ListTypeSpecifier">
                  <elementType name="t:String" xsi:type="NamedTypeSpecifier"/>
               </signature>
               <source localId="671" locator="232:21-232:51" xsi:type="Split">
                  <stringToSplit name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <signature name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="669" locator="232:27-232:45" path="reference" xsi:type="Property">
                        <source localId="668" locator="232:27-232:35" name="reference" xsi:type="OperandRef"/>
                     </operand>
                  </stringToSplit>
                  <separator localId="670" locator="232:48-232:50" valueType="t:String" value="/" xsi:type="Literal"/>
               </source>
            </operand>
         </expression>
         <operand name="reference">
            <operandTypeSpecifier localId="665" locator="231:45-231:58" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="resourceId">
            <operandTypeSpecifier localId="666" locator="231:72-231:77" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="688" locator="239:1-240:52" name="references" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if any of the given references are to the given resource"/>
            <a:t name="comment" value="Returns true if the `id` element of the given resource exactly equals the tail of any of the given references.&#xa;NOTE: This function assumes resources from the same source server."/>
            <a:s r="688">
               <a:s>/*
@description: Returns true if any of the given references are to the given resource
@comment: Returns true if the `id` element of the given resource exactly equals the tail of any of the given references.
NOTE: This function assumes resources from the same source server.
*/
define fluent function references(references List&lt;FHIR.Reference>, resource FHIR.Resource):
  </a:s>
               <a:s r="687">
                  <a:s r="687">
                     <a:s>exists </a:s>
                     <a:s r="686">
                        <a:s>(</a:s>
                        <a:s r="686">
                           <a:s>
                              <a:s r="679">
                                 <a:s r="678">
                                    <a:s>
                                       <a:s>references</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> R</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="685">
                              <a:s>where </a:s>
                              <a:s r="685">
                                 <a:s r="680">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="685">
                                    <a:s>references(</a:s>
                                    <a:s r="681">
                                       <a:s>resource</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="687" locator="240:3-240:52" xsi:type="Exists">
            <operand localId="686" locator="240:10-240:52" xsi:type="Query">
               <source localId="679" locator="240:11-240:22" alias="R">
                  <expression localId="678" locator="240:11-240:20" name="references" xsi:type="OperandRef"/>
               </source>
               <where localId="685" locator="240:24-240:51" name="references" xsi:type="FunctionRef">
                  <signature name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
                  <signature name="fhir:Resource" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="680" locator="240:30" name="R" xsi:type="AliasRef"/>
                  <operand localId="681" locator="240:43-240:50" name="resource" xsi:type="OperandRef"/>
               </where>
            </operand>
         </expression>
         <operand name="references">
            <operandTypeSpecifier localId="676" locator="239:46-239:65" xsi:type="ListTypeSpecifier">
               <elementType localId="675" locator="239:51-239:64" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand name="resource">
            <operandTypeSpecifier localId="677" locator="239:77-239:89" name="fhir:Resource" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="696" locator="247:1-248:54" name="references" context="Patient" accessLevel="Public" fluent="true" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:t name="description" value="Returns true if any of the given references are to the given resourceId"/>
            <a:t name="comment" value="Returns true if the `resourceId` parameter exactly equals the tail of any of the given references.&#xa;NOTE: This function assumes resources from the same source server."/>
            <a:s r="696">
               <a:s>/*
@description: Returns true if any of the given references are to the given resourceId
@comment: Returns true if the `resourceId` parameter exactly equals the tail of any of the given references.
NOTE: This function assumes resources from the same source server.
*/
define fluent function references(references List&lt;FHIR.Reference>, resourceId String):
  </a:s>
               <a:s r="695">
                  <a:s r="695">
                     <a:s>exists </a:s>
                     <a:s r="694">
                        <a:s>(</a:s>
                        <a:s r="694">
                           <a:s>
                              <a:s r="690">
                                 <a:s r="689">
                                    <a:s>
                                       <a:s>references</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> R</a:s>
                              </a:s>
                           </a:s>
                           <a:s> </a:s>
                           <a:s r="693">
                              <a:s>where </a:s>
                              <a:s r="693">
                                 <a:s r="691">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="693">
                                    <a:s>references(</a:s>
                                    <a:s r="692">
                                       <a:s>resourceId</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="695" locator="248:3-248:54" xsi:type="Exists">
            <operand localId="694" locator="248:10-248:54" xsi:type="Query">
               <source localId="690" locator="248:11-248:22" alias="R">
                  <expression localId="689" locator="248:11-248:20" name="references" xsi:type="OperandRef"/>
               </source>
               <where localId="693" locator="248:24-248:53" name="references" xsi:type="FunctionRef">
                  <signature name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:String" xsi:type="NamedTypeSpecifier"/>
                  <operand localId="691" locator="248:30" name="R" xsi:type="AliasRef"/>
                  <operand localId="692" locator="248:43-248:52" name="resourceId" xsi:type="OperandRef"/>
               </where>
            </operand>
         </expression>
         <operand name="references">
            <operandTypeSpecifier localId="683" locator="247:46-247:65" xsi:type="ListTypeSpecifier">
               <elementType localId="682" locator="247:51-247:64" name="fhir:Reference" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
         <operand name="resourceId">
            <operandTypeSpecifier localId="684" locator="247:79-247:84" name="t:String" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
   </statements>
</library>
